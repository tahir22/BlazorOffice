// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace Test.Client.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Test.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Test.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Inputs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Spinner;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Popups;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Navigations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.DocumentEditor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\BA Tech\source\repos\Test\Client\_Imports.razor"
using Syncfusion.Blazor.Notifications;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\BA Tech\source\repos\Test\Client\Pages\Customerr.razor"
using Test.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\BA Tech\source\repos\Test\Client\Pages\Customerr.razor"
using Syncfusion.Blazor.Grids;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/Customerr")]
    public partial class Customerr : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 138 "C:\Users\BA Tech\source\repos\Test\Client\Pages\Customerr.razor"
       
    #region Toast
    SfToast ToastObj;
    string toastMessage;
    ToastModel Toast;
    #endregion

    private int UserToBeDeletedId;
    CustomerModel User = new CustomerModel();
    public List<CustomerModel> Orders { get; set; }
    private async Task OnBeginHandler(ActionEventArgs<CustomerModel> Args)
    {
        if (Args.RequestType == Syncfusion.Blazor.Grids.Action.Save)
        {
            if (Args.Action == "Add")
            {

                User = Args.Data; //returns the edited / insrted record details.
                                  //insert into your db



                var result = await Http.PostAsJsonAsync("api/Values/AddCustomer", User);
                if (result.StatusCode == System.Net.HttpStatusCode.OK)
                {
                    toastMessage = "Data save successfully";
                    Toast = new ToastModel { Title = "Congratulations ", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                    //Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                    await CallGetAllCustomer();
                    await this.ToastObj.Show(Toast);


                    //await JSRuntime.InvokeVoidAsync("toastfun");

                    User = new CustomerModel();

                }
                else
                {

                    toastMessage = "Data not save successfully";
                    Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                    await this.ToastObj.Show(Toast);
                }
            }
            else
            {


                var result = await Http.PostAsJsonAsync("api/Values/UpdateCustomerAsync", User);
                if (result.StatusCode == System.Net.HttpStatusCode.OK)
                {
                    toastMessage = "Data Updated successfully";
                    Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                    await this.ToastObj.Show(Toast);
                }
                else
                {

                    toastMessage = "Data not Updated successfully";
                    Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                    await CallGetAllCustomer();
                    await this.ToastObj.Show(Toast);
                }
                //update data into your db
            }
        }

        if (Args.RequestType == Syncfusion.Blazor.Grids.Action.Delete)
        {


            //if (Args.Action == "Delete")
            //{



            int id = Args.Data.Id;
            apiRequest apiRequestt = new apiRequest() { Id = id };

            var result = await Http.PostAsJsonAsync("api/Values/DeleteUser", apiRequestt);
            if (result.StatusCode == System.Net.HttpStatusCode.OK)
            {

                toastMessage = "Data Delete successfully";
                Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                await CallGetAllCustomer();
                await this.ToastObj.Show(Toast);

                // await Http.PostAsJsonAsync("api/Values/DeleteUser", id);
            }
            else
            {

                toastMessage = "Data not Delete successfully";
                Toast = new ToastModel { Title = "New Menu Item", Content = toastMessage, CssClass = "e-toast-success", Icon = "e-success toast-icons" };
                await this.ToastObj.Show(Toast);
            }





        }
    }





    public string[] ToolbarItems = new string[] { "ExcelExport", "CsvExport", "PdfExport", "Search", "Add", "Edit", "Delete", "Update", "Cancel" };

    public IEditorSettings FreightEditParams = new NumericEditCellParams
    {
        Params = new NumericTextBoxModel<object>() { ShowClearButton = true, ShowSpinButton = false }
    };



    public List<CustomerModel> AccidentsList { get; set; }

    public List<CustomerModel> TreeData { get; set; }
    SfGrid<CustomerModel> DailyGrid;

    public async Task CallGetAllCustomer()
    {
        AccidentsList = (await Http.GetFromJsonAsync<List<CustomerModel>>("api/Values/GetAllCustomer")).OrderByDescending(x => x.Id).ToList();
        Orders = AccidentsList;

    }

    protected override async Task OnInitializedAsync()
    {
        await CallGetAllCustomer();
        //forecasts = await Http.GetFromJsonAsync<WeatherForecast[]>("WeatherForecast");

        //TreeData = (await Http.GetFromJsonAsync<List<CustomerModel>>("api/Values/GetAllCustomer")).OrderByDescending(x => x.Id).ToList();

        //.OrderByDescending(x => x.LastUpdated)
    }
    public void DailyToolbarClick(Syncfusion.Blazor.Navigations.ClickEventArgs args)
    {
        if (args.Item.Id == "DailyGrid_pdfexport")
        {
            PdfExportProperties Props = new PdfExportProperties();
            Props.PageOrientation = PageOrientation.Landscape;
            Props.PageSize = PdfPageSize.A4;
            this.DailyGrid.PdfExport(Props);
        }
        if (args.Item.Id == "DailyGrid_excelexport")
        {
            this.DailyGrid.ExcelExport();
        }
        if (args.Item.Id == "DailyGrid_csvexport")
        {
            this.DailyGrid.CsvExport();
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
